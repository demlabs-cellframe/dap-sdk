# DAP Filename Matching (–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤)

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å `dap_fnmatch` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ —Å —à–∞–±–ª–æ–Ω–∞–º–∏ (pattern matching), –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ `fnmatch` –∏–∑ POSIX. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –º–∞—Å–∫–∞–º–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –≤ DAP SDK.

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–®–∞–±–ª–æ–Ω–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è:
- **–†–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**: –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ –º–∞—Å–∫–µ
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –∫ –≥—Ä—É–ø–ø–∞–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–≤–æ–¥–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ñ–æ—Ä–º–∞—Ç–∞–º
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —à–∞–±–ª–æ–Ω–∞–º

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîç **–®–∞–±–ª–æ–Ω–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ (`*`, `?`, `[...]`)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ GNU (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

### ‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–ª–∞–≥–∏**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Ç–µ–π
- –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

### üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## –§–ª–∞–≥–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–ª–∞–≥–∏

```c
#define FNM_PATHNAME    (1 << 0) /* No wildcard can ever match `/'.  */
/* –°–∏–º–≤–æ–ª—ã –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ –º–æ–≥—É—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å '/' */

#define FNM_NOESCAPE    (1 << 1) /* Backslashes don't quote special chars.  */
/* –û–±—Ä–∞—Ç–Ω—ã–µ —Å–ª–µ—à–∏ –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã */

#define FNM_PERIOD      (1 << 2) /* Leading `.' is matched only explicitly.  */
/* –í–µ–¥—É—â–∞—è '.' —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ —è–≤–Ω–æ–º—É —É–∫–∞–∑–∞–Ω–∏—é */
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–ª–∞–≥–∏ (GNU)

```c
#define FNM_FILE_NAME   FNM_PATHNAME   /* Preferred GNU name.  */
/* –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–æ–µ GNU –∏–º—è –¥–ª—è FNM_PATHNAME */

#define FNM_LEADING_DIR (1 << 3)   /* Ignore `/...' after a match.  */
/* –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å '/...' –ø–æ—Å–ª–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è */

#define FNM_CASEFOLD    (1 << 4)   /* Compare without regard to case.  */
/* –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ */

#define FNM_EXTMATCH    (1 << 5)   /* Use ksh-like extended matching. */
/* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤ —Å—Ç–∏–ª–µ ksh */
```

## API –§—É–Ω–∫—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

```c
// –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ —Å —à–∞–±–ª–æ–Ω–æ–º
extern int dap_fnmatch(const char *pattern, const char *string, int flags);
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `pattern` - –®–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- `string` - –°—Ç—Ä–æ–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- `flags` - –§–ª–∞–≥–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- `0` - –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ
- `FNM_NOMATCH` - –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å —à–∞–±–ª–æ–Ω–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏

| –°–∏–º–≤–æ–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä | –°–æ–≤–ø–∞–¥–µ–Ω–∏—è |
|--------|----------|--------|------------|
| `*` | –õ—é–±–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤ | `*.txt` | `file.txt`, `data.txt` |
| `?` | –û–¥–∏–Ω –ª—é–±–æ–π —Å–∏–º–≤–æ–ª | `file?.txt` | `file1.txt`, `fileA.txt` |
| `[abc]` | –û–¥–∏–Ω —Å–∏–º–≤–æ–ª –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ | `file[123].txt` | `file1.txt`, `file2.txt`, `file3.txt` |
| `[a-z]` | –î–∏–∞–ø–∞–∑–æ–Ω —Å–∏–º–≤–æ–ª–æ–≤ | `file[a-z].txt` | `filea.txt`, `fileb.txt`, ... |
| `[!abc]` | –õ—é–±–æ–π —Å–∏–º–≤–æ–ª –∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö | `file[!0-9].txt` | `filea.txt`, `fileB.txt` |

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (FNM_EXTMATCH)

| –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä | –°–æ–≤–ø–∞–¥–µ–Ω–∏—è |
|-------------|----------|--------|------------|
| `?(pattern)` | –ù–æ–ª—å –∏–ª–∏ –æ–¥–Ω–æ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ | `file?(1).txt` | `file.txt`, `file1.txt` |
| `*(pattern)` | –ù–æ–ª—å –∏–ª–∏ –±–æ–ª–µ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–π | `*(file).txt` | `file.txt`, `filefile.txt` |
| `+(pattern)` | –û–¥–Ω–æ –∏–ª–∏ –±–æ–ª–µ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–π | `+(file).txt` | `file.txt`, `filefile.txt` |
| `@(pattern)` | –†–æ–≤–Ω–æ –æ–¥–Ω–æ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ | `@(file).txt` | `file.txt` |
| `!(pattern)` | –õ—é–±–æ–µ –∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ | `!(file).txt` | `data.txt`, `info.txt` |

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```c
#include "dap_fnmatch.h"

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞
int check_file_extension(const char *filename) {
    if (dap_fnmatch("*.txt", filename, 0) == 0) {
        printf("–≠—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª: %s\n", filename);
        return 1;
    }
    return 0;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å —É—á–µ—Ç–æ–º –ø—É—Ç–∏
int check_path_pattern(const char *filepath) {
    // '*' –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç '/' —Å —Ñ–ª–∞–≥–æ–º FNM_PATHNAME
    if (dap_fnmatch("src/*.c", filepath, FNM_PATHNAME) == 0) {
        printf("C —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ src: %s\n", filepath);
        return 1;
    }
    return 0;
}
```

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏

```c
// –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
bool is_valid_config_file(const char *filename) {
    // –î–æ–ø—É—Å—Ç–∏–º—ã–µ —à–∞–±–ª–æ–Ω—ã: config*.json, settings*.yaml
    const char *patterns[] = {
        "config*.json",
        "settings*.yaml",
        NULL
    };

    for (int i = 0; patterns[i]; i++) {
        if (dap_fnmatch(patterns[i], filename, FNM_CASEFOLD) == 0) {
            return true;
        }
    }
    return false;
}

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –∫ —Å–ø–∏—Å–∫—É —Ñ–∞–π–ª–æ–≤
void process_files_by_pattern(char **filenames, const char *pattern) {
    for (int i = 0; filenames[i]; i++) {
        if (dap_fnmatch(pattern, filenames[i], 0) == 0) {
            process_file(filenames[i]);
        }
    }
}
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ

```c
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
int advanced_pattern_matching(const char *filename) {
    // –°–æ–≤–ø–∞–¥–µ—Ç —Å: test.c, test.h, test.cpp, test.hpp
    if (dap_fnmatch("test.@(c|cpp|h|hpp)", filename, FNM_EXTMATCH) == 0) {
        printf("–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º: %s\n", filename);
        return 1;
    }

    // –°–æ–≤–ø–∞–¥–µ—Ç —Å: file.txt, file1.txt, file2.txt, –Ω–æ –ù–ï —Å file.txt.bak
    if (dap_fnmatch("file+([0-9]).txt", filename, FNM_EXTMATCH) == 0) {
        printf("–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å —Ü–∏—Ñ—Ä–æ–≤—ã–º —à–∞–±–ª–æ–Ω–æ–º: %s\n", filename);
        return 1;
    }

    return 0;
}
```

### –†–∞–±–æ—Ç–∞ —Å –ø—É—Ç—è–º–∏

```c
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π
bool should_process_path(const char *path) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö .c —Ñ–∞–π–ª–æ–≤ –≤ src/, –Ω–æ –Ω–µ –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
    if (dap_fnmatch("src/*.c", path, FNM_PATHNAME) == 0) {
        return true;
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö .h —Ñ–∞–π–ª–æ–≤ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ
    if (dap_fnmatch("*.h", path, 0) == 0) {
        return true;
    }

    return false;
}

// –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤
bool is_hidden_file(const char *filename) {
    // –í–µ–¥—É—â–∞—è '.' –¥–æ–ª–∂–Ω–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —è–≤–Ω–æ
    if (dap_fnmatch(".*", filename, FNM_PERIOD) == 0) {
        return true;
    }
    return false;
}
```

### –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

```c
// –ü–æ–∏—Å–∫ –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
bool case_insensitive_match(const char *pattern, const char *string) {
    return dap_fnmatch(pattern, string, FNM_CASEFOLD) == 0;
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
void find_log_files(char **files) {
    for (int i = 0; files[i]; i++) {
        // –ù–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞
        if (case_insensitive_match("*log*", files[i])) {
            printf("–ù–∞–π–¥–µ–Ω —Ñ–∞–π–ª –ª–æ–≥–æ–≤: %s\n", files[i]);
        }
    }
}
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π:
- **–õ–∏–Ω–µ–µ–Ω –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —à–∞–±–ª–æ–Ω–æ–≤
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç backtracking** –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –¢–∏–ø —à–∞–±–ª–æ–Ω–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä—ã |
|-------------|-----------|---------|
| –ü—Ä–æ—Å—Ç—ã–µ | O(n) | `*.txt`, `file?` |
| –î–∏–∞–ø–∞–∑–æ–Ω—ã | O(n) | `[a-z]*`, `[0-9]+` |
| –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ | O(n¬≤) | –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã |
| –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ | O(n¬≤) | `*(a*b*c)` |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–†–∞–Ω–Ω–µ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ**: –í—ã—Ö–æ–¥ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
3. **SIMD –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å—Ä–∞–≤–Ω–µ–Ω–∏–π

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ DAP SDK

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```c
// –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω—É
void load_config_files(const char *config_dir) {
    DIR *dir = opendir(config_dir);
    if (!dir) return;

    struct dirent *entry;
    while ((entry = readdir(dir)) != NULL) {
        // –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ .json —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        if (dap_fnmatch("*.json", entry->d_name, 0) == 0) {
            char filepath[PATH_MAX];
            snprintf(filepath, sizeof(filepath), "%s/%s",
                    config_dir, entry->d_name);
            load_json_config(filepath);
        }
    }
    closedir(dir);
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```c
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
bool is_valid_api_endpoint(const char *endpoint) {
    // –î–æ–ø—É—Å—Ç–∏–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: /api/v1/*, /api/v2/*
    const char *valid_patterns[] = {
        "/api/v1/*",
        "/api/v2/*",
        NULL
    };

    for (int i = 0; valid_patterns[i]; i++) {
        if (dap_fnmatch(valid_patterns[i], endpoint, FNM_PATHNAME) == 0) {
            return true;
        }
    }
    return false;
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤

```c
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ª–æ–≥–æ–≤
typedef enum {
    LOG_LEVEL_DEBUG,
    LOG_LEVEL_INFO,
    LOG_LEVEL_WARN,
    LOG_LEVEL_ERROR
} log_level_t;

log_level_t parse_log_level(const char *log_line) {
    if (dap_fnmatch("*DEBUG*", log_line, FNM_CASEFOLD) == 0) {
        return LOG_LEVEL_DEBUG;
    }
    if (dap_fnmatch("*INFO*", log_line, FNM_CASEFOLD) == 0) {
        return LOG_LEVEL_INFO;
    }
    if (dap_fnmatch("*WARN*", log_line, FNM_CASEFOLD) == 0) {
        return LOG_LEVEL_WARN;
    }
    if (dap_fnmatch("*ERROR*", log_line, FNM_CASEFOLD) == 0) {
        return LOG_LEVEL_ERROR;
    }

    return LOG_LEVEL_INFO; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
}
```

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

```c
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
bool matches_record_pattern(const char *record_key, const char *pattern) {
    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –≤ –∫–ª—é—á–∞—Ö –∑–∞–ø–∏—Å–µ–π
    return dap_fnmatch(pattern, record_key, 0) == 0;
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
void query_database(const char *pattern) {
    // –ù–∞–π—Ç–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å –∫–ª—é—á–∞–º–∏ –≤–∏–¥–∞ "user_*_profile"
    database_foreach_record(record) {
        if (matches_record_pattern(record->key, pattern)) {
            process_record(record);
        }
    }
}
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

- `dap_strfuncs.h` - –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏
- `dap_common.h` - –û–±—â–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- `dap_fnmatch_loop.h` - –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

## –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```c
// –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
bool safe_pattern_match(const char *pattern, const char *string, int flags) {
    if (!pattern || !string) {
        return false;
    }

    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —à–∞–±–ª–æ–Ω–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è DoS
    if (strlen(pattern) > MAX_PATTERN_LENGTH) {
        log_it(L_WARNING, "Pattern too long: %zu", strlen(pattern));
        return false;
    }

    return dap_fnmatch(pattern, string, flags) == 0;
}
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç ReDoS –∞—Ç–∞–∫

```c
// –ò–∑–±–µ–≥–∞–π—Ç–µ –æ–ø–∞—Å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
const char *dangerous_patterns[] = {
    "(a+)+b",    // –ö–∞—Ç–æ—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–æ–µ backtracking
    "(a*)*",     // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
    "(a|a)*",    // –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
    NULL
};

bool is_safe_pattern(const char *pattern) {
    for (int i = 0; dangerous_patterns[i]; i++) {
        if (strstr(pattern, dangerous_patterns[i])) {
            return false;
        }
    }
    return true;
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

```c
// –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
char *escape_pattern(const char *user_input) {
    // –ó–∞–º–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
    return dap_str_replace_char(user_input, '*', '\\*');
}
```

## –û—Ç–ª–∞–¥–∫–∞

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

```c
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
void debug_pattern_match(const char *pattern, const char *string, int flags) {
    int result = dap_fnmatch(pattern, string, flags);
    printf("Pattern matching debug:\n");
    printf("  Pattern: '%s'\n", pattern);
    printf("  String:  '%s'\n", string);
    printf("  Flags:   0x%x\n", flags);
    printf("  Result:  %s (%d)\n",
           result == 0 ? "MATCH" : "NO MATCH", result);

    // –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–ª–∞–≥–∏
    if (flags & FNM_PATHNAME) printf("  - FNM_PATHNAME\n");
    if (flags & FNM_NOESCAPE) printf("  - FNM_NOESCAPE\n");
    if (flags & FNM_PERIOD) printf("  - FNM_PERIOD\n");
    if (flags & FNM_CASEFOLD) printf("  - FNM_CASEFOLD\n");
    if (flags & FNM_EXTMATCH) printf("  - FNM_EXTMATCH\n");
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

```c
// –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
void test_fnmatch_patterns() {
    struct {
        const char *pattern;
        const char *test_string;
        int flags;
        bool expected_match;
    } test_cases[] = {
        {"*.txt", "file.txt", 0, true},
        {"*.txt", "file.TXT", FNM_CASEFOLD, true},
        {"src/*.c", "src/main.c", FNM_PATHNAME, true},
        {"src/*.c", "src/test/main.c", FNM_PATHNAME, false},
        {"file[0-9].txt", "file5.txt", 0, true},
        {"file[!0-9].txt", "fileA.txt", 0, true},
        {NULL, NULL, 0, false}
    };

    for (int i = 0; test_cases[i].pattern; i++) {
        int result = dap_fnmatch(test_cases[i].pattern,
                                test_cases[i].test_string,
                                test_cases[i].flags);
        bool actual_match = (result == 0);

        if (actual_match != test_cases[i].expected_match) {
            printf("TEST FAILED: %s %c %s (flags=0x%x)\n",
                   test_cases[i].pattern,
                   test_cases[i].expected_match ? '=' : '!',
                   test_cases[i].test_string,
                   test_cases[i].flags);
        } else {
            printf("TEST PASSED: %s %c %s\n",
                   test_cases[i].pattern,
                   test_cases[i].expected_match ? '=' : '!',
                   test_cases[i].test_string);
        }
    }
}
```

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```c
// –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
void benchmark_fnmatch(const char *pattern, char **test_strings, int num_strings) {
    clock_t start = clock();

    int matches = 0;
    for (int i = 0; i < num_strings; i++) {
        if (dap_fnmatch(pattern, test_strings[i], 0) == 0) {
            matches++;
        }
    }

    clock_t end = clock();
    double time_spent = (double)(end - start) / CLOCKS_PER_SEC;

    printf("Pattern '%s': %d matches in %.3f seconds (%.1f matches/sec)\n",
           pattern, matches, time_spent, matches / time_spent);
}
```

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –≤ DAP SDK, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≥–∏–±–∫–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö.
