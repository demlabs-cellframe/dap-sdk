# DAP SDK Net Module - –°–µ—Ç–µ–≤–æ–π –º–æ–¥—É–ª—å

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å `dap-sdk/net` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –≤ DAP SDK. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—É—é –ø–æ—Ç–æ–∫–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üåê **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ —Å–µ—Ä–≤–µ—Ä—ã**
- **HTTP/HTTPS —Å–µ—Ä–≤–µ—Ä—ã** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π REST API
- **JSON-RPC —Å–µ—Ä–≤–µ—Ä—ã** –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä
- **WebSocket —Å–µ—Ä–≤–µ—Ä—ã** –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π
- **CLI —Å–µ—Ä–≤–µ—Ä—ã** –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Encryption —Å–µ—Ä–≤–µ—Ä—ã** –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### üì° **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
- **HTTP –∫–ª–∏–µ–Ω—Ç—ã** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–∫—Å–∏ –∏ SSL
- **Link Manager** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- **Connection pooling** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

### ‚ö° **–ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**
- **Stream processing** –¥–ª—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **Session management** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- **Channel processing** –¥–ª—è –º–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **Cluster support** –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
dap-sdk/net/
‚îú‚îÄ‚îÄ server/                    # –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ http_server/         # HTTP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ json_rpc/            # JSON-RPC —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ cli_server/         # CLI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ enc_server/         # –®–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ notify_server/      # –°–µ—Ä–≤–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ test/                # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ client/                   # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ http/               # HTTP –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ link_manager/       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ stream/                   # –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ stream/             # –û—Å–Ω–æ–≤–Ω–∞—è –ø–æ—Ç–æ–∫–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ session/            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ ch/                 # –ö–∞–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ test/               # –¢–µ—Å—Ç—ã –ø–æ—Ç–æ–∫–æ–≤
‚îú‚îÄ‚îÄ common/                   # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ http/               # HTTP —É—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ app-cli/                 # CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **HTTP Server (http_server/)**

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```c
typedef struct dap_http_server {
    dap_server_t *server;           // –ë–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
    dap_http_cache_t *cache;         // –ö—ç—à HTTP
    dap_config_t *config;            // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    uint16_t port;                   // –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
    bool use_ssl;                    // SSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    // ... –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
} dap_http_server_t;
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```c
// –°–æ–∑–¥–∞–Ω–∏–µ HTTP —Å–µ—Ä–≤–µ—Ä–∞
dap_http_server_t* dap_http_server_create(const char* addr, uint16_t port);

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ URL
int dap_http_server_add_proc(dap_http_server_t* server,
                             const char* url_path,
                             http_proc_func_t proc_func,
                             void* arg);

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
int dap_http_server_start(dap_http_server_t* server);

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
void dap_http_server_stop(dap_http_server_t* server);
```

### 2. **JSON-RPC Server (json_rpc/)**

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞
```c
typedef struct dap_json_rpc_request {
    int64_t id;                    // ID –∑–∞–ø—Ä–æ—Å–∞
    char* method;                  // –ò–º—è –º–µ—Ç–æ–¥–∞
    json_object* params;           // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
    char* jsonrpc;                 // –í–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ("2.0")
} dap_json_rpc_request_t;

typedef struct dap_json_rpc_response {
    int64_t id;                    // ID –æ—Ç–≤–µ—Ç–∞
    json_object* result;           // –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    json_object* error;            // –û—à–∏–±–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    char* jsonrpc;                 // –í–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
} dap_json_rpc_response_t;
```

#### API –º–µ—Ç–æ–¥—ã
```c
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è RPC –º–µ—Ç–æ–¥–∞
int dap_json_rpc_register_method(const char* method_name,
                                json_rpc_handler_func_t handler,
                                void* arg);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
char* dap_json_rpc_process_request(const char* request_json);

// –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
char* dap_json_rpc_create_response(int64_t id,
                                  json_object* result,
                                  json_object* error);
```

### 3. **Stream Processing (stream/)**

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Ç–æ–∫–æ–≤
```c
typedef struct dap_stream {
    dap_stream_session_t* session;    // –°–µ—Å—Å–∏—è –ø–æ—Ç–æ–∫–∞
    dap_stream_worker_t* worker;      // –†–∞–±–æ—á–∏–π –ø–æ—Ç–æ–∫
    dap_stream_cluster_t* cluster;    // –ö–ª–∞—Å—Ç–µ—Ä
    uint32_t id;                      // ID –ø–æ—Ç–æ–∫–∞
    void* internal;                   // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ
} dap_stream_t;

typedef struct dap_stream_session {
    uint64_t id;                      // ID —Å–µ—Å—Å–∏–∏
    time_t created;                   // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    time_t last_active;               // –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    dap_stream_t* stream;             // –°–≤—è–∑–∞–Ω–Ω—ã–π –ø–æ—Ç–æ–∫
} dap_stream_session_t;
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
```c
// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
dap_stream_t* dap_stream_create(uint32_t id);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ –ø–∞–∫–µ—Ç–∞
int dap_stream_packet_in(dap_stream_t* stream,
                        dap_stream_pkt_t* packet);

// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
int dap_stream_packet_out(dap_stream_t* stream,
                         dap_stream_pkt_t* packet);
```

## API Reference

### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### dap_server_create()
```c
dap_server_t* dap_server_create(const char* addr, uint16_t port);
```
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Å–µ—Ç–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `addr` - –∞–¥—Ä–µ—Å –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ (NULL –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)
- `port` - –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ NULL –ø—Ä–∏ –æ—à–∏–±–∫–µ

#### dap_server_start()
```c
int dap_server_start(dap_server_t* server);
```
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `0` - —É—Å–ø–µ—Ö
- `-1` - –æ—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### dap_client_connect()
```c
dap_client_t* dap_client_connect(const char* addr, uint16_t port);
```
**–û–ø–∏—Å–∞–Ω–∏–µ**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `addr` - –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
- `port` - –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

#### dap_client_send()
```c
int dap_client_send(dap_client_t* client, const void* data, size_t size);
```
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `client` - –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- `data` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `size` - —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –±–∞–π—Ç –∏–ª–∏ -1 –ø—Ä–∏ –æ—à–∏–±–∫–µ

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π HTTP —Å–µ—Ä–≤–µ—Ä

```c
#include "dap_http_server.h"
#include "dap_http_simple.h"

int main() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    if (dap_enc_init() != 0) return -1;
    if (dap_http_init() != 0) return -1;

    // –°–æ–∑–¥–∞–Ω–∏–µ HTTP —Å–µ—Ä–≤–µ—Ä–∞
    dap_http_server_t* server = dap_http_server_create("0.0.0.0", 8080);
    if (!server) {
        printf("Failed to create HTTP server\n");
        return -1;
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
    dap_http_simple_proc_add(server, "/hello", hello_handler, NULL);

    // –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
    if (dap_http_server_start(server) != 0) {
        printf("Failed to start HTTP server\n");
        return -1;
    }

    // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
    while (1) {
        sleep(1);
    }

    return 0;
}

static void hello_handler(dap_http_simple_request_t* request,
                         dap_http_simple_response_t* response) {
    dap_http_simple_response_set_content(response,
                                       "Hello, World!",
                                       strlen("Hello, World!"),
                                       "text/plain");
}
```

### –ü—Ä–∏–º–µ—Ä 2: JSON-RPC –∫–ª–∏–µ–Ω—Ç

```c
#include "dap_json_rpc.h"
#include "dap_client.h"

int json_rpc_example() {
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
    dap_client_t* client = dap_client_connect("127.0.0.1", 8080);
    if (!client) {
        printf("Failed to connect to server\n");
        return -1;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ RPC –∑–∞–ø—Ä–æ—Å–∞
    json_object* params = json_object_new_object();
    json_object_object_add(params, "name", json_object_new_string("world"));

    dap_json_rpc_request_t* request = dap_json_rpc_request_create(
        1,                          // ID –∑–∞–ø—Ä–æ—Å–∞
        "hello",                    // –ò–º—è –º–µ—Ç–æ–¥–∞
        params                      // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
    );

    // –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JSON
    char* request_json = dap_json_rpc_request_serialize(request);

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
    if (dap_client_send(client, request_json, strlen(request_json)) < 0) {
        printf("Failed to send request\n");
        free(request_json);
        dap_json_rpc_request_free(request);
        return -1;
    }

    free(request_json);
    dap_json_rpc_request_free(request);

    // –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞...
    // (–∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ —á—Ç–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞)

    return 0;
}
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```c
#include "dap_stream.h"
#include "dap_stream_session.h"

int stream_example() {
    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
    dap_stream_session_t* session = dap_stream_session_create();
    if (!session) {
        printf("Failed to create session\n");
        return -1;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
    dap_stream_t* stream = dap_stream_create(session, 1);
    if (!stream) {
        printf("Failed to create stream\n");
        dap_stream_session_delete(session);
        return -1;
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    stream->packet_in_callback = my_packet_handler;
    stream->error_callback = my_error_handler;

    // –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    if (dap_stream_start(stream) != 0) {
        printf("Failed to start stream\n");
        dap_stream_delete(stream);
        dap_stream_session_delete(session);
        return -1;
    }

    // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏
    while (running) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤
        dap_stream_process_packets(stream);

        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
        usleep(1000);
    }

    // –û—á–∏—Å—Ç–∫–∞
    dap_stream_delete(stream);
    dap_stream_session_delete(session);

    return 0;
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ë–µ–Ω—á–º–∞—Ä–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–µ—Ä–∞—Ü–∏—è | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|----------|-------------------|------------|
| **HTTP Server** | –ó–∞–ø—Ä–æ—Å—ã/—Å–µ–∫ | ~10,000 | Intel Core i7 |
| **JSON-RPC** | –í—ã–∑–æ–≤—ã/—Å–µ–∫ | ~5,000 | –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã |
| **Stream Processing** | –ü–∞–∫–µ—Ç–æ–≤/—Å–µ–∫ | ~100,000 | –ú–∞–ª–µ–Ω—å–∫–∏–µ –ø–∞–∫–µ—Ç—ã |
| **TCP Connections** | –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | ~1,000/—Å–µ–∫ | –ë–µ–∑ SSL |
| **SSL Handshake** | –ü–æ–ª–Ω—ã–π | ~500/—Å–µ–∫ | AES-256 |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### Connection Pooling
```c
// –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
dap_client_pool_t* pool = dap_client_pool_create("example.com", 443, 10);

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–∑ –ø—É–ª–∞
dap_client_t* client = dap_client_pool_get(pool);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
dap_client_send(client, data, size);

// –í–æ–∑–≤—Ä–∞—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –ø—É–ª
dap_client_pool_put(pool, client);
```

#### Zero-copy –æ–ø–µ—Ä–∞—Ü–∏–∏
```c
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ zero-copy –±—É—Ñ–µ—Ä–æ–≤
dap_buffer_t* buffer = dap_buffer_create_zero_copy(data, size);

// –ü–µ—Ä–µ–¥–∞—á–∞ –±—É—Ñ–µ—Ä–∞ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
dap_stream_send_buffer(stream, buffer);

// –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ (–¥–∞–Ω–Ω—ã–µ –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è)
dap_buffer_free(buffer);
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```c
// –í–∫–ª—é—á–µ–Ω–∏–µ SSL/TLS
dap_server_config_t config = {
    .use_ssl = true,
    .cert_file = "/path/to/cert.pem",
    .key_file = "/path/to/key.pem",
    .ca_file = "/path/to/ca.pem"
};

dap_server_t* server = dap_server_create_ssl(&config);
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```c
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
dap_auth_config_t auth = {
    .type = DAP_AUTH_TYPE_TOKEN,
    .token_secret = "your-secret-key",
    .token_expiry = 3600  // 1 —á–∞—Å
};

dap_server_set_auth(server, &auth);
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```ini
[net]
# HTTP —Å–µ—Ä–≤–µ—Ä
http_port = 8080
http_max_connections = 1000
http_timeout = 30

# JSON-RPC
rpc_max_batch_size = 100
rpc_timeout = 60

# Streams
stream_buffer_size = 65536
stream_max_sessions = 10000
stream_timeout = 300
```

## –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```c
#include "dap_log.h"

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
dap_log(L_INFO, "Server started on port %d", port);
dap_log(L_DEBUG, "New connection from %s:%d", addr, port);
dap_log(L_ERROR, "Connection failed: %s", strerror(errno));
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```c
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
dap_server_stats_t stats;
dap_server_get_stats(server, &stats);

printf("Active connections: %d\n", stats.active_connections);
printf("Total requests: %lld\n", stats.total_requests);
printf("Average response time: %.2f ms\n", stats.avg_response_time);
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å `dap-sdk/net` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—É—é –∏ –≥–∏–±–∫—É—é —Å–µ—Ç–µ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—ã—Å—è—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSL/TLS –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
1. **–î–ª—è REST API**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP Server —Å JSON-RPC
2. **–î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebSocket –∏–ª–∏ Stream processing
3. **–î–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON-RPC –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è
4. **–î–ª—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Stream processing —Å zero-copy

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `dap_http_server.h` - HTTP —Å–µ—Ä–≤–µ—Ä API
- `dap_json_rpc.h` - JSON-RPC API
- `dap_stream.h` - Stream processing API
- `dap_client.h` - Client API
- –ü—Ä–∏–º–µ—Ä—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `examples/net/`
- –¢–µ—Å—Ç—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `test/net/`
